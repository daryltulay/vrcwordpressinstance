/*global jQuery, Galleria */

/**
 * Galleria LCweb Theme 2013-04-17 - for mediagrid
 * (c) Montanari Luca
 */

(function(b){Galleria.addTheme({name:"lcweb_mg",author:"Montanari Luca",defaults:{transition:mg_galleria_fx,transitionSpeed:mg_galleria_fx_time,imageCrop:mg_galleria_img_crop,thumbCrop:!0,queue:!1,showCounter:!1,pauseOnInteraction:!0,_toggleInfo:!1},init:function(f){Galleria.requires(1.28,"LCweb theme requires Galleria 1.2.8 or later");this.addElement("mg-play","mg-toggle-thumb");this.append({info:["mg-play","mg-toggle-thumb","info-text"]});var e=this.$("info-text"),c=this.$("mg-play"),d=Galleria.TOUCH; d||(this.addIdleState(this.get("image-nav-left"),{left:-50}),this.addIdleState(this.get("image-nav-right"),{right:-50}));this.bind("thumbnail",function(a){d?b(a.thumbTarget).css("opacity",this.getIndex()?1:0.6):(b(a.thumbTarget).css("opacity",0.6).parent().hover(function(){b(this).not(".active").children().stop().fadeTo(100,1)},function(){b(this).not(".active").children().stop().fadeTo(400,0.6)}),a.index===this.getIndex()&&b(a.thumbTarget).css("opacity",1))});this.bind("loadstart",function(a){a.cached|| this.$("loader").show().fadeTo(200,1);this.$("info").parent().find(".galleria-stage .galleria-info-text").remove();this.hasInfo()?this.$("info").removeClass("has_no_data"):this.$("info").addClass("has_no_data");b(a.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",0.6)});this.bind("loadfinish",function(a){this.$("loader").fadeOut(200);!this._playing&&c.hasClass("galleria-mg-pause")&&c.removeClass("galleria-mg-pause");e.hide();this.hasInfo()&&(a=this.$("info").find(".galleria-info-text").clone(), this.$("info").parent().find(".galleria-stage").append(a),this.$("info").parent().find(".galleria-stage .galleria-info-text").fadeTo(1,mg_galleria_fx_time))})}})})(jQuery);